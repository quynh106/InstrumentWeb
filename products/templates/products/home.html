{% extends "base.html" %}
{% load static %}

{% block title %}Home - InstrumentStore{% endblock %}

{% block content %}
<!-- Start Hero Area -->
<section class="hero-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-12 custom-padding-right">
                <div class="slider-head">
                    <!-- Start Hero Slider -->
                    <div class="hero-slider">
                        {% for product in new_products %}
                        <!-- Start Single Slider -->
                        {% if product.image %}
<div class="single-slider" style="background-image: url('{{ product.image.url }}');">
{% else %}
<div class="single-slider" style="background-image: url('https://via.placeholder.com/800x500');">
{% endif %}

                            <div class="content">
                                <h2><span>New Arrival!</span>
                                    {{ product.name }}
                                </h2>
                                <p>{{ product.description|truncatewords:15|default:"High-quality musical instrument for professionals and enthusiasts" }}</p>
                                <h3><span>Now Only</span> ${{ product.price|floatformat:2 }}</h3>
                                <div class="button">
                                    <a href="{% url 'products:product_detail' product.pk %}" class="btn">Shop Now</a>
                                </div>
                            </div>
                        </div>
                        <!-- End Single Slider -->
                        {% endfor %}
                    </div>
                    <!-- End Hero Slider -->
                </div>
            </div>
            <div class="col-lg-4 col-12">
                <div class="row">
                    <div class="col-lg-12 col-md-6 col-12 md-custom-padding">
                        <!-- Start Small Banner -->
                        <div class="hero-small-banner"
                            style="background-image: url('{{ new_products.0.image.url }}');">
                            <div class="content">
                                <h2>
                                    <span>Special Offer</span>
                                    {% if new_products.0 %}{{ new_products.0.name }}{% else %}Featured Product{% endif %}
                                </h2>
                                <h3>{% if new_products.0 %}${{ new_products.0.price|floatformat:2 }}{% else %}$99.99{% endif %}</h3>
                            </div>
                        </div>
                        <!-- End Small Banner -->
                    </div>
                    <div class="col-lg-12 col-md-6 col-12">
                        <!-- Start Small Banner -->
                        <div class="hero-small-banner style2">
                            <div class="content">
                                <h2>Weekly Sale!</h2>
                                <p>Saving up to 50% off all online store items this week.</p>
                                <div class="button">
                                    <a class="btn" href="{% url 'products:product_list' %}">Shop Now</a>
                                </div>
                            </div>
                        </div>
                        <!-- Start Small Banner -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Hero Area -->

<!-- Start Trending Product Area -->
<section class="trending-product section" style="margin-top: 12px;">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="section-title">
                    <h2>Trending Product</h2>
                    <p>There are many variations of passages of Lorem Ipsum available, but the majority have
                        suffered alteration in some form.</p>
                </div>
            </div>
        </div>
        <div class="row">
            {% for product in trending_products %}
            <div class="col-lg-3 col-md-6 col-12">
                <!-- Start Single Product -->
                <div class="single-product">
                    <div class="product-image">
                        <img src="{% if product.image %}{{ product.image.url }}{% else %}https://via.placeholder.com/300x300{% endif %}" alt="{{ product.name }}">
                        {% if forloop.counter <= 2 %}
                        <span class="new-tag">New</span>
                        {% endif %}
                        <div class="button">
                            <a href="{% url 'products:product_detail' product.pk %}" class="btn"><i class="lni lni-cart"></i> Add to Cart</a>
                        </div>
                    </div>
                    <div class="product-info">
                        <span class="category">{{ product.category.name }}</span>
                        <h4 class="title">
                            <a href="{% url 'products:product_detail' product.pk %}">{{ product.name }}</a>
                        </h4>
                        <ul class="review">
                            {% for i in "12345"|make_list %}
                                {% if forloop.counter <= product.avg_rating|default:0 %}
                                <li><i class="lni lni-star-filled"></i></li>
                                {% else %}
                                <li><i class="lni lni-star"></i></li>
                                {% endif %}
                            {% endfor %}
                            <li><span>{{ product.reviews.count|default:0 }} Review(s)</span></li>
                        </ul>
                        <div class="price">
                            <span>${{ product.price|floatformat:2 }}</span>
                        </div>
                    </div>
                </div>
                <!-- End Single Product -->
            </div>
            {% empty %}
            <div class="col-12">
                <p class="text-center">No products available.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
<!-- End Trending Product Area -->

<!-- Start Call Action Area -->
<section class="call-action section">
    <div class="container">
        <div class="row ">
            <div class="col-lg-8 offset-lg-2 col-12">
                <div class="inner">
                    <div class="content">
                        <h2 class="wow fadeInUp" data-wow-delay=".4s">Currently You are using free<br>
                            Lite version of ShopGrids</h2>
                        <p class="wow fadeInUp" data-wow-delay=".6s">Please, purchase full version of the template
                            to get all pages,<br> features and commercial license.</p>
                        <div class="button wow fadeInUp" data-wow-delay=".8s">
                            <a href="javascript:void(0)" class="btn">Purchase Now</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Call Action Area -->

<!-- Start Banner Area -->
<section class="banner section">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-12">
                <div class="single-banner" style="background-image:url('{% static 'images/banner/banner-1-bg.jpg' %}')">
                    <div class="content">
                        <h2>Smart Watch 2.0</h2>
                        <p>Space Gray Aluminum Case with <br>Black/Volt Real Sport Band </p>
                        <div class="button">
                            <a href="{% url 'products:product_list' %}" class="btn">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-12">
                <div class="single-banner custom-responsive-margin"
                    style="background-image:url('{% static 'images/banner/banner-2-bg.jpg' %}')">
                    <div class="content">
                        <h2>Smart Headphone</h2>
                        <p>Lorem ipsum dolor sit amet, <br>eiusmod tempor
                            incididunt ut labore.</p>
                        <div class="button">
                            <a href="{% url 'products:product_list' %}" class="btn">Shop Now</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->

<!-- Start Shipping Info -->
<section class="shipping-info">
    <div class="container">
        <ul>
            <!-- Free Shipping -->
            <li>
                <div class="media-icon">
                    <i class="lni lni-delivery"></i>
                </div>
                <div class="media-body">
                    <h5>Free Shipping</h5>
                    <span>On order over $99</span>
                </div>
            </li>
            <!-- Money Return -->
            <li>
                <div class="media-icon">
                    <i class="lni lni-support"></i>
                </div>
                <div class="media-body">
                    <h5>24/7 Support.</h5>
                    <span>Live Chat Or Call.</span>
                </div>
            </li>
            <!-- Support 24/7 -->
            <li>
                <div class="media-icon">
                    <i class="lni lni-credit-cards"></i>
                </div>
                <div class="media-body">
                    <h5>Online Payment.</h5>
                    <span>Secure Payment Services.</span>
                </div>
            </li>
            <!-- Safe Payment -->
            <li>
                <div class="media-icon">
                    <i class="lni lni-reload"></i>
                </div>
                <div class="media-body">
                    <h5>Easy Return.</h5>
                    <span>Hassle Free Shopping.</span>
                </div>
            </li>
        </ul>
    </div>
</section>
<!-- End Shipping Info -->
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    //========= Hero Slider 
    tns({
        container: '.hero-slider',
        slideBy: 'page',
        autoplay: true,
        autoplayButtonOutput: false,
        mouseDrag: true,
        gutter: 0,
        items: 1,
        nav: false,
        controls: true,
        controlsText: ['<i class="lni lni-chevron-left"></i>', '<i class="lni lni-chevron-right"></i>'],
    });
</script>
{% endblock %}
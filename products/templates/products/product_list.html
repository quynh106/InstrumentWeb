{% extends "base.html" %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Product List{% endblock %}</title>
  </head>
  <body>
    {% block content %}

    <h2 class="mb-4 fw-bold">Musical Instruments</h2>

    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-4">
      {% for product in products %}
      <div class="col">
        <a
          href="{% url 'products:product_detail' product.pk %}"
          class="text-decoration-none text-dark"
        >
          <div
            class="card border-0 shadow-sm h-100 transition ease-in-out hover-shadow p-2"
            style="transition: 0.25s"
          >
            {% if product.image %}
            <img
              src="{{ product.image.url }}"
              class="card-img-top"
              style="height: 170px; object-fit: cover"
              alt="{{ product.name }}"
            />
            {% else %}
            <img
              src="https://via.placeholder.com/300x200"
              class="card-img-top"
              style="height: 170px; object-fit: cover"
              alt="{{ product.name }}"
            />
            {% endif %}

            <div class="card-body p-2">
              <h6 class="card-title text-truncate">{{ product.name }}</h6>
              <p class="mb-1 fw-bold text-primary">
                ${{ product.price|floatformat:2 }}
              </p>
              <p class="small text-muted mb-0">
                ‚≠ê {{ product.reviews.all|length|default:0 }} reviews
              </p>
            </div>
          </div>
        </a>
      </div>
      {% empty %}
      <p>No products available.</p>
      {% endfor %}
    </div>
    {% endblock %}
  </body>
</html>
